(this.webpackJsonpbudgetapp=this.webpackJsonpbudgetapp||[]).push([[18],{187:function(e,t,n){"use strict";var a=n(1),r=n(7),c=n(11),i=n(3),o=n(0),s=n(4),u=n(49),l=n.n(u),d=n(164),b=n(179),p=n.n(b),f=n(37),j=n(12),h=n(21),O=function(e,t,n,a){var r=0,c=a.get("".concat(t,"_").concat(e));if(void 0!==c)switch(n){case"expenses":r+=c.expenses;break;case"incomes":r+=c.incomes;break;default:r+=c.cancelled}return r},x=n(68);function m(){var e=Object(i.a)(["\n  grid-column: 1 / -1;\n  justify-self: stretch;\n  align-self: center;\n\n  width: 100%;\n  height: 100%;\n  background-color: var(--color-white);\n  padding: 2rem;\n  border-radius: 1rem;\n  box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  @media only screen and (max-width: 37.5em) {\n    display: none;\n  }\n"]);return m=function(){return e},e}var g=s.c.div(m());t.a=function(e){var t=e.className,n=e.location,i=Object(o.useContext)(f.a),s=Object(o.useContext)(j.a),u=Object(o.useContext)(h.a),b=Object(o.useState)([]),m=Object(c.a)(b,2),y=m[0],v=m[1],w=Object(o.useState)([]),Y=Object(c.a)(w,2),D=Y[0],M=Y[1],E=Object(o.useState)({chart:{type:"bar",height:"100%"},plotOptions:{bar:{horizontal:!1,columnWidth:"50%",endingShape:"rounded"}},dataLabels:{enabled:!1},legend:{position:"top"},stroke:{show:!1},tooltip:{enabled:!0,x:{show:!1}},xaxis:{title:{text:"month"},categories:[]},yaxis:{title:{text:"".concat(Object(x.a)(s.currency)),categories:[]},min:0},fill:{opacity:1},colors:["#FF7B7D","#199FE6","#3A2D96"]}),S=Object(c.a)(E,2),k=S[0],F=S[1];return Object(o.useEffect)((function(){if(i.size&&u.length){for(var e=[],t=l()(u[0].date,"MM/DD/YYYY"),n=0;n<i.size;n+=1){var a=l()(t.toDate(),"MM/DD/YYYY").subtract(n,"months"),c=a.format("MMM"),o=a.format("YYYY");e.push([c,o])}v(e.slice());var s=e.map((function(e){return e.join(" ")}));F(Object(r.a)(Object(r.a)({},k),{},{xaxis:Object(r.a)(Object(r.a)({},k.xaxis),{},{categories:s})}))}}),[i]),Object(o.useEffect)((function(){if(y.length){var e=y.map((function(e){return O(e[0],e[1],"cancelled",i)})),t=y.map((function(e){return O(e[0],e[1],"expenses",i)})),n=y.map((function(e){return O(e[0],e[1],"incomes",i)}));M([{name:"Cancelled",data:e.map((function(e){return e.toFixed(2)}))},{name:"Expenses",data:t.map((function(e){return e.toFixed(2)}))},{name:"Incomes",data:n.map((function(e){return e.toFixed(2)}))}])}}),[y]),Object(a.jsxs)(g,{className:t,children:["dashboard"===n?Object(a.jsx)(d.a,{variant:"h5",color:"textSecondary",children:"Activities"}):null,Object(a.jsx)("div",{id:"chart",children:Object(a.jsx)(p.a,{options:"dashboard"===n?Object(r.a)({},k):Object(r.a)(Object(r.a)({},k),{},{title:{text:"Last 6 months activities",align:"center"}}),series:D.slice(),type:"bar"})})]})}},228:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(3),c=n(0),i=n(4),o=n(187),s=n(7),u=n(11),l=n(179),d=n.n(l),b=n(21),p=n(12),f=n(22),j=n(68);function h(){var e=Object(r.a)(["\n  grid-column: 1 / span 1;\n\n  width: 100%;\n  background-color: var(--color-white);\n  padding: 1rem;\n  border-radius: 1rem;\n  box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n\n  display: flex;\n  justify-content: center;\n\n  @media only screen and (min-width: 75em) {\n    grid-column: 1 / span 2;\n  }\n"]);return h=function(){return e},e}var O=i.c.div(h()),x=function(){var e=Object(c.useContext)(p.a),t=Object(c.useContext)(b.a).slice(0,40),n=Object(c.useState)([]),r=Object(u.a)(n,2),i=r[0],o=r[1],l=Object(c.useState)([]),h=Object(u.a)(l,2),x=h[0],m=h[1],g=Object(c.useState)({chart:{type:"pie",width:"100%"},title:{text:"Purchases in ".concat(Object(j.a)(e.currency)," by category"),align:"center"},labels:[],legend:{show:!1}}),y=Object(u.a)(g,2),v=y[0],w=y[1],Y=Object(c.useRef)(!0);return Object(c.useEffect)((function(){var e=[];return t.length&&(t.forEach((function(t){e.includes(t.category)||e.push(t.category)})),Y.current&&(o(e),w(Object(s.a)(Object(s.a)({},v),{},{labels:e})))),function(){Y.current=!1}}),[t]),Object(c.useEffect)((function(){if(i){var n={};i.forEach((function(e){n[e]=0})),t.forEach((function(t){n[t.category]+=Object(f.a)(parseFloat(t.amount),t.currency,e.currency,e.currencyRates)}));var a=i.map((function(e){return n[e]}));m(a)}}),[i]),Object(a.jsx)(O,{children:Object(a.jsx)("div",{id:"chart",children:Object(a.jsx)(d.a,{options:Object(s.a)({},v),series:x,type:"pie"})})})},m=n(49),g=n.n(m);function y(){var e=Object(r.a)(["\n  grid-column: 1 / -1;\n  justify-self: stretch;\n  align-self: center;\n\n  width: 100%;\n  background-color: var(--color-white);\n  padding: 1rem;\n  border-radius: 1rem;\n  box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n\n  @media only screen and (min-width: 75em) {\n    grid-column: 1 / span 2;\n    grid-row: 2 / span 1;\n    align-self: stretch;\n  }\n"]);return y=function(){return e},e}var v=i.c.div(y()),w=function(){var e=Object(c.useContext)(p.a),t=Object(c.useContext)(b.a),n=Object(c.useState)(new Map),r=Object(u.a)(n,2),i=r[0],o=r[1],l=Object(c.useState)([]),h=Object(u.a)(l,2),O=h[0],x=h[1],m=Object(c.useState)({chart:{type:"area",height:"100%"},dataLabels:{enabled:!1},stroke:{width:1},title:{text:"Last month expenses",align:"center"},tooltip:{enabled:!0,x:{show:!1}},xaxis:{categories:[]},yaxis:{title:{text:"".concat(Object(j.a)(e.currency)),categories:[]},min:0},fill:{opacity:1},colors:["#3A2D96"]}),y=Object(u.a)(m,2),w=y[0],Y=y[1],D=Object(c.useCallback)((function(n){var a=new Map;if(t.length){for(var r=g()(t[0].date,"MM/DD/YYYY"),c=g()(r.toDate(),"MM/DD/YYYY").subtract(1,"months"),i=0;i<t.length;i+=1){var s=g()(t[i].date,"MM/DD/YYYY"),u=s.format("DD/MM/YY");s.isAfter(c)&&s.isBefore(r)&&"expense"===t[i].transactionType&&(void 0===a.get(u)?a.set(u,Object(f.a)(parseFloat(t[i].amount),t[i].currency,e.currency,e.currencyRates)):a.set(u,a.get(u)+Object(f.a)(parseFloat(t[i].amount),t[i].currency,e.currency,e.currencyRates)))}n&&o(a)}}),[t]),M=Object(c.useRef)(!0);return Object(c.useEffect)((function(){return D(M.current),function(){M.current=!1}}),[D]),Object(c.useEffect)((function(){if(i.size){var e=Array.from(i.keys()),t=(e=e.sort((function(e,t){return g()(e,"DD/MM/YY").diff(g()(t,"DD/MM/YY"))}))).map((function(e){return i.get(e)}));x([{name:"Expenses",data:t.map((function(e){return e.toFixed(2)}))}]);var n=e.slice();Y(Object(s.a)(Object(s.a)({},w),{},{xaxis:Object(s.a)(Object(s.a)({},w.xaxis),{},{categories:n})}))}}),[i]),Object(a.jsx)(v,{children:Object(a.jsx)("div",{id:"chart",children:Object(a.jsx)(d.a,{options:Object(s.a)({},w),series:O.slice(),type:"area"})})})};function Y(){var e=Object(r.a)(["\n  grid-column: 2 / span 1;\n\n  width: 100%;\n  background-color: var(--color-white);\n  padding: 1rem;\n  border-radius: 1rem;\n  box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n\n  display: flex;\n  justify-content: center;\n\n  @media only screen and (min-width: 75em) {\n    grid-column: 3 / span 1;\n    grid-row: 1 / span 2;\n  }\n"]);return Y=function(){return e},e}var D=i.c.div(Y()),M=function(){var e=Object(c.useContext)(b.a).slice(0,40),t=Object(c.useState)({paypal:0,nonPaypal:0}),n=Object(u.a)(t,2),r=n[0],i=n[1],o=Object(c.useState)([]),l=Object(u.a)(o,2),p=l[0],f=l[1],j=Object(c.useState)({chart:{type:"bar",width:"100%"},plotOptions:{bar:{horizontal:!1,startingShape:"flat",endingShape:"flat",columnWidth:"20%",barHeight:"70%",rangeBarOverlap:!0,rangeBarGroupRows:!1}},legend:{show:!1},stroke:{show:!1},tooltip:{enabled:!0,x:{show:!1}},xaxis:{categories:["Paypal","Other methods"],axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}}},yaxis:{axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1}},title:{text:"No. of purchasesby payment method",align:"center"}}),h=Object(u.a)(j,1)[0],O=Object(c.useRef)(!0);return Object(c.useEffect)((function(){if(e.length){var t={paypal:0,nonPaypal:0};e.forEach((function(e){e.paypal?t.paypal+=1:t.nonPaypal+=1})),O.current&&i(t)}return function(){O.current=!1}}),[e]),Object(c.useEffect)((function(){r&&f([{data:[r.paypal,r.nonPaypal]}])}),[r]),Object(a.jsx)(D,{children:Object(a.jsx)("div",{id:"chart",children:Object(a.jsx)(d.a,{options:Object(s.a)({},h),series:p.slice(),type:"bar",height:"100%"})})})};function E(){var e=Object(r.a)(["\n  @media screen and (max-width: 75em) {\n    display: none !important;\n  }\n"]);return E=function(){return e},e}function S(){var e=Object(r.a)(["\n  display: grid;\n  grid-template-rows: 2fr 3fr;\n  grid-template-columns: repeat(2, 1fr);\n  grid-gap: 1.7rem;\n\n  height: 100%;\n  margin: 0 auto;\n  overflow-y: hidden;\n\n  &:focus,\n  &:active,\n  &:hover {\n    overflow-y: scroll;\n  }\n\n  @media only screen and (max-width: 37.5em) {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    grid-gap: 1.7rem;\n\n    & > *:not(:last-child) {\n      margin-bottom: 1.5rem;\n    }\n  }\n\n  @media only screen and (min-width: 75em) {\n    grid-template-columns: repeat(3, 1fr);\n    grid-template-rows: 2fr 2fr 3fr;\n  }\n"]);return S=function(){return e},e}var k=i.c.div(S()),F=Object(i.c)(o.a)(E());t.default=function(){return Object(a.jsxs)(k,{children:[Object(a.jsx)(x,{}),Object(a.jsx)(M,{}),Object(a.jsx)(w,{}),Object(a.jsx)(F,{location:"charts"})]})}}}]);
//# sourceMappingURL=18.45ab9162.chunk.js.map