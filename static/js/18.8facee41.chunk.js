(this.webpackJsonpbudgetapp=this.webpackJsonpbudgetapp||[]).push([[18],{195:function(e,t,n){"use strict";var a=n(1),r=n(11),c=n(9),i=n(3),o=n(0),s=n(4),u=n(50),l=n.n(u),d=n(173),b=n(187),f=n.n(b),p=n(51),j=n(12),h=n(72),x=function(e,t,n,a){var r=0,c=a.get("".concat(t,"_").concat(e));if(void 0!==c)switch(n){case"expenses":r+=c.expenses;break;case"incomes":r+=c.incomes;break;default:r+=c.cancelled}return r},m=n(71);function O(){var e=Object(i.a)(["\n  grid-column: 1 / -1;\n  justify-self: stretch;\n  align-self: center;\n\n  width: 100%;\n  height: 100%;\n  background-color: var(--color-white);\n  padding: 2rem;\n  border-radius: 1rem;\n  box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  @media only screen and (max-width: 37.5em) {\n    max-width: 30rem;\n    justify-self: center;\n  }\n"]);return O=function(){return e},e}var g=s.c.div(O());t.a=function(e){var t=e.className,n=e.location,i=Object(o.useContext)(p.a),s=Object(o.useContext)(j.a),u=Object(o.useState)([]),b=Object(c.a)(u,2),O=b[0],y=b[1],v=Object(o.useState)([]),w=Object(c.a)(v,2),Y=w[0],D=w[1],E=Object(o.useState)({chart:{type:"bar",height:"100%"},plotOptions:{bar:{horizontal:!1,columnWidth:"50%",endingShape:"rounded"}},dataLabels:{enabled:!1},legend:{position:"top"},stroke:{show:!1},tooltip:{enabled:!0,x:{show:!1}},xaxis:{title:{text:"month"},categories:[]},yaxis:{title:{text:"".concat(Object(m.a)(s.currency)),categories:[]},min:0},fill:{opacity:1},colors:["#FF7B7D","#199FE6","#3A2D96"]}),M=Object(c.a)(E,2),S=M[0],k=M[1];return Object(o.useEffect)((function(){var e=!0;if(6===i.size){for(var t=[],n=0;n<6;n+=1){var a=l()(h.b.toDate(),"MM/DD/YYYY").subtract(n,"months"),c=a.format("MMM"),o=a.format("YYYY");t.push([c,o])}if(e){y(t.slice());var s=t.map((function(e){return e.join(" ")}));k(Object(r.a)(Object(r.a)({},S),{},{xaxis:Object(r.a)(Object(r.a)({},S.xaxis),{},{categories:s})}))}}return function(){e=!1}}),[i]),Object(o.useEffect)((function(){var e=!0;if(O){var t=O.map((function(e){return x(e[0],e[1],"cancelled",i)})),n=O.map((function(e){return x(e[0],e[1],"expenses",i)})),a=O.map((function(e){return x(e[0],e[1],"incomes",i)}));e&&D([{name:"Cancelled",data:t.map((function(e){return e.toFixed(2)}))},{name:"Expenses",data:n.map((function(e){return e.toFixed(2)}))},{name:"Incomes",data:a.map((function(e){return e.toFixed(2)}))}])}return function(){e=!1}}),[O]),Object(a.jsxs)(g,{className:t,children:["dashboard"===n?Object(a.jsx)(d.a,{variant:"h5",color:"textSecondary",children:"Activities"}):null,Object(a.jsx)("div",{id:"chart",children:Object(a.jsx)(f.a,{options:"dashboard"===n?Object(r.a)({},S):Object(r.a)(Object(r.a)({},S),{},{title:{text:"Last 6 months activities",align:"center"}}),series:Y.slice(),type:"bar"})})]})}},239:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(3),c=n(0),i=n(4),o=n(195),s=n(11),u=n(9),l=n(187),d=n.n(l),b=n(36),f=n(12),p=n(22),j=n(71);function h(){var e=Object(r.a)(["\n  grid-column: 1 / span 1;\n\n  width: 100%;\n  background-color: var(--color-white);\n  padding: 1rem;\n  border-radius: 1rem;\n  box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n\n  display: flex;\n  justify-content: center;\n\n  @media only screen and (min-width: 75em) {\n    grid-column: 1 / span 2;\n  }\n"]);return h=function(){return e},e}var x=i.c.div(h()),m=function(){var e=Object(c.useContext)(f.a),t=Object(c.useContext)(b.a),n=Object(c.useState)([]),r=Object(u.a)(n,2),i=r[0],o=r[1],l=Object(c.useState)([]),h=Object(u.a)(l,2),m=h[0],O=h[1],g=Object(c.useState)({chart:{type:"pie",width:"100%"},title:{text:"Purchases in ".concat(Object(j.a)(e.currency)," by category"),align:"center"},labels:[],legend:{show:!1}}),y=Object(u.a)(g,2),v=y[0],w=y[1];return Object(c.useEffect)((function(){var e=!0,n=[];return t.forEach((function(e){n.includes(e.category)||n.push(e.category)})),e&&(o(n),w(Object(s.a)(Object(s.a)({},v),{},{labels:n}))),function(){e=!1}}),[t]),Object(c.useEffect)((function(){var n=!0;if(i){var a={};i.forEach((function(e){a[e]=0})),t.forEach((function(t){a[t.category]+=Object(p.a)(parseFloat(t.amount),t.currency,e.currency,e.currencyRates)}));var r=i.map((function(e){return a[e]}));n&&O(r)}return function(){n=!1}}),[i]),Object(a.jsx)(x,{children:Object(a.jsx)("div",{id:"chart",children:Object(a.jsx)(d.a,{options:Object(s.a)({},v),series:m,type:"pie"})})})},O=n(50),g=n.n(O),y=n(28),v=n(72),w=n(42);function Y(){var e=Object(r.a)(["\n  grid-column: 1 / -1;\n  justify-self: stretch;\n  align-self: center;\n\n  width: 100%;\n  background-color: var(--color-white);\n  padding: 1rem;\n  border-radius: 1rem;\n  box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n\n  @media only screen and (min-width: 75em) {\n    grid-column: 1 / span 2;\n    grid-row: 2 / span 1;\n    align-self: stretch;\n  }\n"]);return Y=function(){return e},e}var D=i.c.div(Y()),E=function(){var e=Object(c.useContext)(y.b),t=Object(c.useContext)(f.a),n=Object(c.useState)(new Map),r=Object(u.a)(n,2),i=r[0],o=r[1],l=g()(v.b.toDate(),"MM/DD/YYYY").subtract(1,"months"),b=Object(c.useState)([]),h=Object(u.a)(b,2),x=h[0],m=h[1],O=Object(c.useState)({chart:{type:"area",height:"100%"},dataLabels:{enabled:!1},stroke:{width:1},title:{text:"Last month expenses",align:"center"},tooltip:{enabled:!0,x:{show:!1}},xaxis:{categories:[]},yaxis:{title:{text:"".concat(Object(j.a)(t.currency)),categories:[]},min:0},fill:{opacity:1},colors:["#3A2D96"]}),Y=Object(u.a)(O,2),E=Y[0],M=Y[1],S=Object(c.useCallback)((function(n){e(!0);var a=new Map;if(w instanceof Array)for(var r=0;r<w.length;r+=1){var c=g()(w[r].date,"MM/DD/YYYY"),i=c.format("DD/MM/YY");c.isAfter(l)&&c.isBefore(v.b)&&"expense"===w[r].transactionType&&(void 0===a.get(i)?a.set(i,Object(p.a)(parseFloat(w[r].amount),w[r].currency,t.currency,t.currencyRates)):a.set(i,a.get(i)+Object(p.a)(parseFloat(w[r].amount),w[r].currency,t.currency,t.currencyRates))),n&&o(a)}e(!1)}),[w]);return Object(c.useEffect)((function(){var e=!0;return S(e),function(){e=!1}}),[S]),Object(c.useEffect)((function(){var e=!0;if(i.size>28){var t=Array.from(i.keys()),n=(t=t.sort((function(e,t){return g()(e,"DD/MM/YY").diff(g()(t,"DD/MM/YY"))}))).map((function(e){return i.get(e)}));if(e){m([{name:"Expenses",data:n.map((function(e){return e.toFixed(2)}))}]);var a=t.slice();M(Object(s.a)(Object(s.a)({},E),{},{xaxis:Object(s.a)(Object(s.a)({},E.xaxis),{},{categories:a})}))}}return function(){e=!1}}),[i]),Object(a.jsx)(D,{children:Object(a.jsx)("div",{id:"chart",children:Object(a.jsx)(d.a,{options:Object(s.a)({},E),series:x.slice(),type:"area"})})})};function M(){var e=Object(r.a)(["\n  grid-column: 2 / span 1;\n\n  width: 100%;\n  background-color: var(--color-white);\n  padding: 1rem;\n  border-radius: 1rem;\n  box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n\n  display: flex;\n  justify-content: center;\n\n  @media only screen and (min-width: 75em) {\n    grid-column: 3 / span 1;\n    grid-row: 1 / span 2;\n  }\n"]);return M=function(){return e},e}var S=i.c.div(M()),k=function(){var e=Object(c.useContext)(b.a),t=Object(c.useState)({paypal:0,nonPaypal:0}),n=Object(u.a)(t,2),r=n[0],i=n[1],o=Object(c.useState)([]),l=Object(u.a)(o,2),f=l[0],p=l[1],j=Object(c.useState)({chart:{type:"bar",width:"100%"},plotOptions:{bar:{horizontal:!1,startingShape:"flat",endingShape:"flat",columnWidth:"20%",barHeight:"70%",rangeBarOverlap:!0,rangeBarGroupRows:!1}},legend:{show:!1},stroke:{show:!1},tooltip:{enabled:!0,x:{show:!1}},xaxis:{categories:["Paypal","Other methods"],axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}}},yaxis:{axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1}},title:{text:"No. of purchases by payment method",align:"center"}}),h=Object(u.a)(j,1)[0];return Object(c.useEffect)((function(){var t=!0,n={paypal:0,nonPaypal:0};return e.forEach((function(e){e.paypal?n.paypal+=1:n.nonPaypal+=1})),t&&i(n),function(){t=!1}}),[e]),Object(c.useEffect)((function(){var e=!0;return r&&e&&p([{data:[r.paypal,r.nonPaypal]}]),function(){e=!1}}),[r]),Object(a.jsx)(S,{children:Object(a.jsx)("div",{id:"chart",children:Object(a.jsx)(d.a,{options:Object(s.a)({},h),series:f.slice(),type:"bar",height:"100%"})})})};function F(){var e=Object(r.a)(["\n  @media screen and (max-width: 75em) {\n    display: none !important;\n  }\n"]);return F=function(){return e},e}function C(){var e=Object(r.a)(["\n  display: grid;\n  grid-template-rows: 2fr 3fr;\n  grid-template-columns: repeat(2, 1fr);\n  grid-gap: 1.7rem;\n\n  height: 100%;\n  margin: 0 auto;\n  overflow-y: hidden;\n\n  &:focus,\n  &:active,\n  &:hover {\n    overflow-y: scroll;\n  }\n\n  @media only screen and (max-width: 37.5em) {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  @media only screen and (min-width: 75em) {\n    grid-template-columns: repeat(3, 1fr);\n    grid-template-rows: 2fr 2fr 3fr;\n  }\n"]);return C=function(){return e},e}var B=i.c.div(C()),A=Object(i.c)(o.a)(F());t.default=function(){return Object(a.jsxs)(B,{children:[Object(a.jsx)(m,{}),Object(a.jsx)(k,{}),Object(a.jsx)(E,{}),Object(a.jsx)(A,{location:"charts"})]})}}}]);
//# sourceMappingURL=18.8facee41.chunk.js.map